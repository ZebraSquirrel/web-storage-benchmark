import{i as __require,t as __commonJSMin}from"./rolldown-runtime-tX5UdD3f.js";var require_util=__commonJSMin(((exports,module)=>{var assign=make_assign();module.exports={assign,create:make_create(),trim:make_trim(),bind:bind$1,slice:slice$1,each:each$7,map,pluck:pluck$1,isList:isList$1,isFunction:isFunction$1,isObject:isObject$1,Global:window};function make_assign(){return Object.assign?Object.assign:function(obj,props1,props2,etc){for(var i=1;i<arguments.length;i++)each$7(Object(arguments[i]),function(val,key){obj[key]=val});return obj}}function make_create(){if(Object.create)return function(obj,assignProps1,assignProps2,etc){var assignArgsList=slice$1(arguments,1);return assign.apply(this,[Object.create(obj)].concat(assignArgsList))};{function F(){}return function(obj,assignProps1,assignProps2,etc){var assignArgsList=slice$1(arguments,1);return F.prototype=obj,assign.apply(this,[new F].concat(assignArgsList))}}}function make_trim(){return String.prototype.trim?function(str){return String.prototype.trim.call(str)}:function(str){return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,``)}}function bind$1(obj,fn){return function(){return fn.apply(obj,Array.prototype.slice.call(arguments,0))}}function slice$1(arr,index){return Array.prototype.slice.call(arr,index||0)}function each$7(obj,fn){pluck$1(obj,function(val,key){return fn(val,key),!1})}function map(obj,fn){var res=isList$1(obj)?[]:{};return pluck$1(obj,function(v,k){return res[k]=fn(v,k),!1}),res}function pluck$1(obj,fn){if(isList$1(obj)){for(var i=0;i<obj.length;i++)if(fn(obj[i],i))return obj[i]}else for(var key in obj)if(obj.hasOwnProperty(key)&&fn(obj[key],key))return obj[key]}function isList$1(val){return val!=null&&typeof val!=`function`&&typeof val.length==`number`}function isFunction$1(val){return val&&{}.toString.call(val)===`[object Function]`}function isObject$1(val){return val&&{}.toString.call(val)===`[object Object]`}})),require_store_engine=__commonJSMin(((exports,module)=>{var util$1=require_util(),slice=util$1.slice,pluck=util$1.pluck,each$6=util$1.each,bind=util$1.bind,create=util$1.create,isList=util$1.isList,isFunction=util$1.isFunction,isObject=util$1.isObject;module.exports={createStore};var storeAPI={version:`2.0.12`,enabled:!1,get:function(key,optionalDefaultValue){var data=this.storage.read(this._namespacePrefix+key);return this._deserialize(data,optionalDefaultValue)},set:function(key,value){return value===void 0?this.remove(key):(this.storage.write(this._namespacePrefix+key,this._serialize(value)),value)},remove:function(key){this.storage.remove(this._namespacePrefix+key)},each:function(callback){var self$1=this;this.storage.each(function(val,namespacedKey){callback.call(self$1,self$1._deserialize(val),(namespacedKey||``).replace(self$1._namespaceRegexp,``))})},clearAll:function(){this.storage.clearAll()},hasNamespace:function(namespace){return this._namespacePrefix==`__storejs_`+namespace+`_`},createStore:function(){return createStore.apply(this,arguments)},addPlugin:function(plugin){this._addPlugin(plugin)},namespace:function(namespace){return createStore(this.storage,this.plugins,namespace)}};function _warn(){var _console=typeof console>`u`?null:console;_console&&(_console.warn?_console.warn:_console.log).apply(_console,arguments)}function createStore(storages$1,plugins$1,namespace){namespace||=``,storages$1&&!isList(storages$1)&&(storages$1=[storages$1]),plugins$1&&!isList(plugins$1)&&(plugins$1=[plugins$1]);var namespacePrefix=namespace?`__storejs_`+namespace+`_`:``,namespaceRegexp=namespace?RegExp(`^`+namespacePrefix):null;if(!/^[a-zA-Z0-9_\-]*$/.test(namespace))throw Error(`store.js namespaces can only have alphanumerics + underscores and dashes`);var store=create({_namespacePrefix:namespacePrefix,_namespaceRegexp:namespaceRegexp,_testStorage:function(storage){try{var testStr=`__storejs__test__`;storage.write(testStr,testStr);var ok=storage.read(testStr)===testStr;return storage.remove(testStr),ok}catch{return!1}},_assignPluginFnProp:function(pluginFnProp,propName){var oldFn=this[propName];this[propName]=function(){var args=slice(arguments,0),self$1=this;function super_fn(){if(oldFn)return each$6(arguments,function(arg,i){args[i]=arg}),oldFn.apply(self$1,args)}var newFnArgs=[super_fn].concat(args);return pluginFnProp.apply(self$1,newFnArgs)}},_serialize:function(obj){return JSON.stringify(obj)},_deserialize:function(strVal,defaultVal){if(!strVal)return defaultVal;var val=``;try{val=JSON.parse(strVal)}catch{val=strVal}return val===void 0?defaultVal:val},_addStorage:function(storage){this.enabled||this._testStorage(storage)&&(this.storage=storage,this.enabled=!0)},_addPlugin:function(plugin){var self$1=this;if(isList(plugin)){each$6(plugin,function(plugin$1){self$1._addPlugin(plugin$1)});return}if(!pluck(this.plugins,function(seenPlugin){return plugin===seenPlugin})){if(this.plugins.push(plugin),!isFunction(plugin))throw Error(`Plugins must be function values that return objects`);var pluginProperties=plugin.call(this);if(!isObject(pluginProperties))throw Error(`Plugins must return an object of function properties`);each$6(pluginProperties,function(pluginFnProp,propName){if(!isFunction(pluginFnProp))throw Error(`Bad plugin property: `+propName+` from plugin `+plugin.name+`. Plugins should only return functions.`);self$1._assignPluginFnProp(pluginFnProp,propName)})}},addStorage:function(storage){_warn(`store.addStorage(storage) is deprecated. Use createStore([storages])`),this._addStorage(storage)}},storeAPI,{plugins:[]});return store.raw={},each$6(store,function(prop,propName){isFunction(prop)&&(store.raw[propName]=bind(store,prop))}),each$6(storages$1,function(storage){store._addStorage(storage)}),each$6(plugins$1,function(plugin){store._addPlugin(plugin)}),store}})),require_localStorage=__commonJSMin(((exports,module)=>{var Global$4=require_util().Global;module.exports={name:`localStorage`,read:read$5,write:write$5,each:each$5,remove:remove$5,clearAll:clearAll$5};function localStorage$1(){return Global$4.localStorage}function read$5(key){return localStorage$1().getItem(key)}function write$5(key,data){return localStorage$1().setItem(key,data)}function each$5(fn){for(var i=localStorage$1().length-1;i>=0;i--){var key=localStorage$1().key(i);fn(read$5(key),key)}}function remove$5(key){return localStorage$1().removeItem(key)}function clearAll$5(){return localStorage$1().clear()}})),require_oldFF_globalStorage=__commonJSMin(((exports,module)=>{var Global$3=require_util().Global;module.exports={name:`oldFF-globalStorage`,read:read$4,write:write$4,each:each$4,remove:remove$4,clearAll:clearAll$4};var globalStorage=Global$3.globalStorage;function read$4(key){return globalStorage[key]}function write$4(key,data){globalStorage[key]=data}function each$4(fn){for(var i=globalStorage.length-1;i>=0;i--){var key=globalStorage.key(i);fn(globalStorage[key],key)}}function remove$4(key){return globalStorage.removeItem(key)}function clearAll$4(){each$4(function(key,_){delete globalStorage[key]})}})),require_oldIE_userDataStorage=__commonJSMin(((exports,module)=>{var Global$2=require_util().Global;module.exports={name:`oldIE-userDataStorage`,write:write$3,read:read$3,each:each$3,remove:remove$3,clearAll:clearAll$3};var storageName=`storejs`,doc$1=Global$2.document,_withStorageEl=_makeIEStorageElFunction(),disable=(Global$2.navigator?Global$2.navigator.userAgent:``).match(/ (MSIE 8|MSIE 9|MSIE 10)\./);function write$3(unfixedKey,data){if(!disable){var fixedKey=fixKey(unfixedKey);_withStorageEl(function(storageEl){storageEl.setAttribute(fixedKey,data),storageEl.save(storageName)})}}function read$3(unfixedKey){if(!disable){var fixedKey=fixKey(unfixedKey),res=null;return _withStorageEl(function(storageEl){res=storageEl.getAttribute(fixedKey)}),res}}function each$3(callback){_withStorageEl(function(storageEl){for(var attributes=storageEl.XMLDocument.documentElement.attributes,i=attributes.length-1;i>=0;i--){var attr=attributes[i];callback(storageEl.getAttribute(attr.name),attr.name)}})}function remove$3(unfixedKey){var fixedKey=fixKey(unfixedKey);_withStorageEl(function(storageEl){storageEl.removeAttribute(fixedKey),storageEl.save(storageName)})}function clearAll$3(){_withStorageEl(function(storageEl){var attributes=storageEl.XMLDocument.documentElement.attributes;storageEl.load(storageName);for(var i=attributes.length-1;i>=0;i--)storageEl.removeAttribute(attributes[i].name);storageEl.save(storageName)})}var forbiddenCharsRegex=RegExp(`[!"#$%&'()*+,/\\\\:;<=>?@[\\]^\`{|}~]`,`g`);function fixKey(key){return key.replace(/^\d/,`___$&`).replace(forbiddenCharsRegex,`___`)}function _makeIEStorageElFunction(){if(!doc$1||!doc$1.documentElement||!doc$1.documentElement.addBehavior)return null;var scriptTag=`script`,storageOwner,storageContainer,storageEl;try{storageContainer=new ActiveXObject(`htmlfile`),storageContainer.open(),storageContainer.write(`<`+scriptTag+`>document.w=window</`+scriptTag+`><iframe src="/favicon.ico"></iframe>`),storageContainer.close(),storageOwner=storageContainer.w.frames[0].document,storageEl=storageOwner.createElement(`div`)}catch{storageEl=doc$1.createElement(`div`),storageOwner=doc$1.body}return function(storeFunction){var args=[].slice.call(arguments,0);args.unshift(storageEl),storageOwner.appendChild(storageEl),storageEl.addBehavior(`#default#userData`),storageEl.load(storageName),storeFunction.apply(this,args),storageOwner.removeChild(storageEl)}}})),require_cookieStorage=__commonJSMin(((exports,module)=>{var util=require_util(),Global$1=util.Global,trim=util.trim;module.exports={name:`cookieStorage`,read:read$2,write:write$2,each:each$2,remove:remove$2,clearAll:clearAll$2};var doc=Global$1.document;function read$2(key){if(!key||!_has(key))return null;var regexpStr=`(?:^|.*;\\s*)`+escape(key).replace(/[\-\.\+\*]/g,`\\$&`)+`\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*`;return unescape(doc.cookie.replace(new RegExp(regexpStr),`$1`))}function each$2(callback){for(var cookies=doc.cookie.split(/; ?/g),i=cookies.length-1;i>=0;i--)if(trim(cookies[i])){var kvp=cookies[i].split(`=`),key=unescape(kvp[0]);callback(unescape(kvp[1]),key)}}function write$2(key,data){key&&(doc.cookie=escape(key)+`=`+escape(data)+`; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/`)}function remove$2(key){!key||!_has(key)||(doc.cookie=escape(key)+`=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/`)}function clearAll$2(){each$2(function(_,key){remove$2(key)})}function _has(key){return RegExp(`(?:^|;\\s*)`+escape(key).replace(/[\-\.\+\*]/g,`\\$&`)+`\\s*\\=`).test(doc.cookie)}})),require_sessionStorage=__commonJSMin(((exports,module)=>{var Global=require_util().Global;module.exports={name:`sessionStorage`,read:read$1,write:write$1,each:each$1,remove:remove$1,clearAll:clearAll$1};function sessionStorage(){return Global.sessionStorage}function read$1(key){return sessionStorage().getItem(key)}function write$1(key,data){return sessionStorage().setItem(key,data)}function each$1(fn){for(var i=sessionStorage().length-1;i>=0;i--){var key=sessionStorage().key(i);fn(read$1(key),key)}}function remove$1(key){return sessionStorage().removeItem(key)}function clearAll$1(){return sessionStorage().clear()}})),require_memoryStorage=__commonJSMin(((exports,module)=>{module.exports={name:`memoryStorage`,read,write,each,remove,clearAll};var memoryStorage={};function read(key){return memoryStorage[key]}function write(key,data){memoryStorage[key]=data}function each(callback){for(var key in memoryStorage)memoryStorage.hasOwnProperty(key)&&callback(memoryStorage[key],key)}function remove(key){delete memoryStorage[key]}function clearAll(key){memoryStorage={}}})),require_all=__commonJSMin(((exports,module)=>{module.exports=[require_localStorage(),require_oldFF_globalStorage(),require_oldIE_userDataStorage(),require_cookieStorage(),require_sessionStorage(),require_memoryStorage()]})),require_json2$1=__commonJSMin((()=>{typeof JSON!=`object`&&(JSON={}),(function(){var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;function f(n){return n<10?`0`+n:n}function this_value(){return this.valueOf()}typeof Date.prototype.toJSON!=`function`&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+`-`+f(this.getUTCMonth()+1)+`-`+f(this.getUTCDate())+`T`+f(this.getUTCHours())+`:`+f(this.getUTCMinutes())+`:`+f(this.getUTCSeconds())+`Z`:null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;function quote(string){return rx_escapable.lastIndex=0,rx_escapable.test(string)?`"`+string.replace(rx_escapable,function(a){var c=meta[a];return typeof c==`string`?c:`\\u`+(`0000`+a.charCodeAt(0).toString(16)).slice(-4)})+`"`:`"`+string+`"`}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];switch(value&&typeof value==`object`&&typeof value.toJSON==`function`&&(value=value.toJSON(key)),typeof rep==`function`&&(value=rep.call(holder,key,value)),typeof value){case`string`:return quote(value);case`number`:return isFinite(value)?String(value):`null`;case`boolean`:case`null`:return String(value);case`object`:if(!value)return`null`;if(gap+=indent,partial=[],Object.prototype.toString.apply(value)===`[object Array]`){for(length=value.length,i=0;i<length;i+=1)partial[i]=str(i,value)||`null`;return v=partial.length===0?`[]`:gap?`[
`+gap+partial.join(`,
`+gap)+`
`+mind+`]`:`[`+partial.join(`,`)+`]`,gap=mind,v}if(rep&&typeof rep==`object`)for(length=rep.length,i=0;i<length;i+=1)typeof rep[i]==`string`&&(k=rep[i],v=str(k,value),v&&partial.push(quote(k)+(gap?`: `:`:`)+v));else for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=str(k,value),v&&partial.push(quote(k)+(gap?`: `:`:`)+v));return v=partial.length===0?`{}`:gap?`{
`+gap+partial.join(`,
`+gap)+`
`+mind+`}`:`{`+partial.join(`,`)+`}`,gap=mind,v}}typeof JSON.stringify!=`function`&&(meta={"\b":`\\b`,"	":`\\t`,"\n":`\\n`,"\f":`\\f`,"\r":`\\r`,'"':`\\"`,"\\":`\\\\`},JSON.stringify=function(value,replacer,space){var i;if(gap=``,indent=``,typeof space==`number`)for(i=0;i<space;i+=1)indent+=` `;else typeof space==`string`&&(indent=space);if(rep=replacer,replacer&&typeof replacer!=`function`&&(typeof replacer!=`object`||typeof replacer.length!=`number`))throw Error(`JSON.stringify`);return str(``,{"":value})}),typeof JSON.parse!=`function`&&(JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==`object`)for(k in value)Object.prototype.hasOwnProperty.call(value,k)&&(v=walk(value,k),v===void 0?delete value[k]:value[k]=v);return reviver.call(holder,key,value)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(a){return`\\u`+(`0000`+a.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,`@`).replace(rx_three,`]`).replace(rx_four,``)))return j=eval(`(`+text+`)`),typeof reviver==`function`?walk({"":j},``):j;throw SyntaxError(`JSON.parse`)})})()})),require_json2=__commonJSMin(((exports,module)=>{module.exports=json2Plugin;function json2Plugin(){return require_json2$1(),{}}})),require_store_legacy=__commonJSMin(((exports,module)=>{var engine=require_store_engine(),storages=require_all(),plugins=[require_json2()];module.exports=engine.createStore(storages,plugins)})),require_localforage=__commonJSMin(((exports,module)=>{(function(f){if(typeof exports==`object`&&module!==void 0)module.exports=f();else if(typeof define==`function`&&define.amd)define([],f);else{var g=typeof window<`u`||typeof window<`u`?window:typeof self<`u`?self:this;g.localforage=f()}})(function(){return(function e(t,n,r){function s(o$1,u){if(!n[o$1]){if(!t[o$1]){var a=typeof __require==`function`&&__require;if(!u&&a)return a(o$1,!0);if(i)return i(o$1,!0);var f=Error(`Cannot find module '`+o$1+`'`);throw f.code=`MODULE_NOT_FOUND`,f}var l=n[o$1]={exports:{}};t[o$1][0].call(l.exports,function(e$1){var n$1=t[o$1][1][e$1];return s(n$1||e$1)},l,l.exports,e,t,n,r)}return n[o$1].exports}for(var i=typeof __require==`function`&&__require,o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module$1,exports$1){(function(global){var Mutation=global.MutationObserver||global.WebKitMutationObserver,scheduleDrain;if(Mutation){var called=0,observer=new Mutation(nextTick),element=global.document.createTextNode(``);observer.observe(element,{characterData:!0}),scheduleDrain=function(){element.data=called=++called%2}}else if(!global.setImmediate&&global.MessageChannel!==void 0){var channel=new global.MessageChannel;channel.port1.onmessage=nextTick,scheduleDrain=function(){channel.port2.postMessage(0)}}else scheduleDrain=`document`in global&&`onreadystatechange`in global.document.createElement(`script`)?function(){var scriptEl=global.document.createElement(`script`);scriptEl.onreadystatechange=function(){nextTick(),scriptEl.onreadystatechange=null,scriptEl.parentNode.removeChild(scriptEl),scriptEl=null},global.document.documentElement.appendChild(scriptEl)}:function(){setTimeout(nextTick,0)};var draining,queue=[];function nextTick(){draining=!0;for(var i,oldQueue,len=queue.length;len;){for(oldQueue=queue,queue=[],i=-1;++i<len;)oldQueue[i]();len=queue.length}draining=!1}module$1.exports=immediate;function immediate(task){queue.push(task)===1&&!draining&&scheduleDrain()}}).call(this,typeof window<`u`?window:typeof self<`u`?self:typeof window<`u`?window:{})},{}],2:[function(_dereq_,module$1,exports$1){var immediate=_dereq_(1);function INTERNAL(){}var handlers={},REJECTED=[`REJECTED`],FULFILLED=[`FULFILLED`],PENDING=[`PENDING`];module$1.exports=Promise$1;function Promise$1(resolver){if(typeof resolver!=`function`)throw TypeError(`resolver must be a function`);this.state=PENDING,this.queue=[],this.outcome=void 0,resolver!==INTERNAL&&safelyResolveThenable(this,resolver)}Promise$1.prototype.catch=function(onRejected){return this.then(null,onRejected)},Promise$1.prototype.then=function(onFulfilled,onRejected){if(typeof onFulfilled!=`function`&&this.state===FULFILLED||typeof onRejected!=`function`&&this.state===REJECTED)return this;var promise=new this.constructor(INTERNAL);return this.state===PENDING?this.queue.push(new QueueItem(promise,onFulfilled,onRejected)):unwrap(promise,this.state===FULFILLED?onFulfilled:onRejected,this.outcome),promise};function QueueItem(promise,onFulfilled,onRejected){this.promise=promise,typeof onFulfilled==`function`&&(this.onFulfilled=onFulfilled,this.callFulfilled=this.otherCallFulfilled),typeof onRejected==`function`&&(this.onRejected=onRejected,this.callRejected=this.otherCallRejected)}QueueItem.prototype.callFulfilled=function(value){handlers.resolve(this.promise,value)},QueueItem.prototype.otherCallFulfilled=function(value){unwrap(this.promise,this.onFulfilled,value)},QueueItem.prototype.callRejected=function(value){handlers.reject(this.promise,value)},QueueItem.prototype.otherCallRejected=function(value){unwrap(this.promise,this.onRejected,value)};function unwrap(promise,func,value){immediate(function(){var returnValue;try{returnValue=func(value)}catch(e){return handlers.reject(promise,e)}returnValue===promise?handlers.reject(promise,TypeError(`Cannot resolve promise with itself`)):handlers.resolve(promise,returnValue)})}handlers.resolve=function(self$1,value){var result=tryCatch(getThen,value);if(result.status===`error`)return handlers.reject(self$1,result.value);var thenable=result.value;if(thenable)safelyResolveThenable(self$1,thenable);else{self$1.state=FULFILLED,self$1.outcome=value;for(var i=-1,len=self$1.queue.length;++i<len;)self$1.queue[i].callFulfilled(value)}return self$1},handlers.reject=function(self$1,error){self$1.state=REJECTED,self$1.outcome=error;for(var i=-1,len=self$1.queue.length;++i<len;)self$1.queue[i].callRejected(error);return self$1};function getThen(obj){var then=obj&&obj.then;if(obj&&(typeof obj==`object`||typeof obj==`function`)&&typeof then==`function`)return function(){then.apply(obj,arguments)}}function safelyResolveThenable(self$1,thenable){var called=!1;function onError(value){called||(called=!0,handlers.reject(self$1,value))}function onSuccess(value){called||(called=!0,handlers.resolve(self$1,value))}function tryToUnwrap(){thenable(onSuccess,onError)}var result=tryCatch(tryToUnwrap);result.status===`error`&&onError(result.value)}function tryCatch(func,value){var out={};try{out.value=func(value),out.status=`success`}catch(e){out.status=`error`,out.value=e}return out}Promise$1.resolve=resolve;function resolve(value){return value instanceof this?value:handlers.resolve(new this(INTERNAL),value)}Promise$1.reject=reject;function reject(reason){var promise=new this(INTERNAL);return handlers.reject(promise,reason)}Promise$1.all=all;function all(iterable){var self$1=this;if(Object.prototype.toString.call(iterable)!==`[object Array]`)return this.reject(TypeError(`must be an array`));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var values=Array(len),resolved=0,i=-1,promise=new this(INTERNAL);++i<len;)allResolver(iterable[i],i);return promise;function allResolver(value,i$1){self$1.resolve(value).then(resolveFromAll,function(error){called||(called=!0,handlers.reject(promise,error))});function resolveFromAll(outValue){values[i$1]=outValue,++resolved===len&&!called&&(called=!0,handlers.resolve(promise,values))}}}Promise$1.race=race;function race(iterable){var self$1=this;if(Object.prototype.toString.call(iterable)!==`[object Array]`)return this.reject(TypeError(`must be an array`));var len=iterable.length,called=!1;if(!len)return this.resolve([]);for(var i=-1,promise=new this(INTERNAL);++i<len;)resolver(iterable[i]);return promise;function resolver(value){self$1.resolve(value).then(function(response){called||(called=!0,handlers.resolve(promise,response))},function(error){called||(called=!0,handlers.reject(promise,error))})}}},{1:1}],3:[function(_dereq_,module$1,exports$1){(function(global){typeof global.Promise!=`function`&&(global.Promise=_dereq_(2))}).call(this,typeof window<`u`?window:typeof self<`u`?self:typeof window<`u`?window:{})},{2:2}],4:[function(_dereq_,module$1,exports$1){var _typeof=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==`function`&&obj.constructor===Symbol&&obj!==Symbol.prototype?`symbol`:typeof obj};function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw TypeError(`Cannot call a class as a function`)}function getIDB(){try{if(typeof indexedDB<`u`)return indexedDB;if(typeof webkitIndexedDB<`u`)return webkitIndexedDB;if(typeof mozIndexedDB<`u`)return mozIndexedDB;if(typeof OIndexedDB<`u`)return OIndexedDB;if(typeof msIndexedDB<`u`)return msIndexedDB}catch{return}}var idb=getIDB();function isIndexedDBValid(){try{if(!idb||!idb.open)return!1;var isSafari=typeof openDatabase<`u`&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),hasFetch=typeof fetch==`function`&&fetch.toString().indexOf(`[native code`)!==-1;return(!isSafari||hasFetch)&&typeof indexedDB<`u`&&typeof IDBKeyRange<`u`}catch{return!1}}function createBlob(parts,properties){parts||=[],properties||={};try{return new Blob(parts,properties)}catch(e){if(e.name!==`TypeError`)throw e;for(var builder=new(typeof BlobBuilder<`u`?BlobBuilder:typeof MSBlobBuilder<`u`?MSBlobBuilder:typeof MozBlobBuilder<`u`?MozBlobBuilder:WebKitBlobBuilder),i=0;i<parts.length;i+=1)builder.append(parts[i]);return builder.getBlob(properties.type)}}typeof Promise>`u`&&_dereq_(3);var Promise$1=Promise;function executeCallback(promise,callback){callback&&promise.then(function(result){callback(null,result)},function(error){callback(error)})}function executeTwoCallbacks(promise,callback,errorCallback){typeof callback==`function`&&promise.then(callback),typeof errorCallback==`function`&&promise.catch(errorCallback)}function normalizeKey(key$3){return typeof key$3!=`string`&&(console.warn(key$3+` used as a key, but it is not a string.`),key$3=String(key$3)),key$3}function getCallback(){if(arguments.length&&typeof arguments[arguments.length-1]==`function`)return arguments[arguments.length-1]}var DETECT_BLOB_SUPPORT_STORE=`local-forage-detect-blob-support`,supportsBlobs=void 0,dbContexts={},toString=Object.prototype.toString,READ_ONLY=`readonly`,READ_WRITE=`readwrite`;function _binStringToArrayBuffer(bin){for(var length$3=bin.length,buf=new ArrayBuffer(length$3),arr=new Uint8Array(buf),i=0;i<length$3;i++)arr[i]=bin.charCodeAt(i);return buf}function _checkBlobSupportWithoutCaching(idb$1){return new Promise$1(function(resolve){var txn=idb$1.transaction(DETECT_BLOB_SUPPORT_STORE,READ_WRITE),blob=createBlob([``]);txn.objectStore(DETECT_BLOB_SUPPORT_STORE).put(blob,`key`),txn.onabort=function(e){e.preventDefault(),e.stopPropagation(),resolve(!1)},txn.oncomplete=function(){var matchedChrome=navigator.userAgent.match(/Chrome\/(\d+)/);resolve(navigator.userAgent.match(/Edge\//)||!matchedChrome||parseInt(matchedChrome[1],10)>=43)}}).catch(function(){return!1})}function _checkBlobSupport(idb$1){return typeof supportsBlobs==`boolean`?Promise$1.resolve(supportsBlobs):_checkBlobSupportWithoutCaching(idb$1).then(function(value){return supportsBlobs=value,supportsBlobs})}function _deferReadiness(dbInfo){var dbContext=dbContexts[dbInfo.name],deferredOperation={};deferredOperation.promise=new Promise$1(function(resolve,reject){deferredOperation.resolve=resolve,deferredOperation.reject=reject}),dbContext.deferredOperations.push(deferredOperation),dbContext.dbReady?dbContext.dbReady=dbContext.dbReady.then(function(){return deferredOperation.promise}):dbContext.dbReady=deferredOperation.promise}function _advanceReadiness(dbInfo){var deferredOperation=dbContexts[dbInfo.name].deferredOperations.pop();if(deferredOperation)return deferredOperation.resolve(),deferredOperation.promise}function _rejectReadiness(dbInfo,err){var deferredOperation=dbContexts[dbInfo.name].deferredOperations.pop();if(deferredOperation)return deferredOperation.reject(err),deferredOperation.promise}function _getConnection(dbInfo,upgradeNeeded){return new Promise$1(function(resolve,reject){if(dbContexts[dbInfo.name]=dbContexts[dbInfo.name]||createDbContext(),dbInfo.db)if(upgradeNeeded)_deferReadiness(dbInfo),dbInfo.db.close();else return resolve(dbInfo.db);var dbArgs=[dbInfo.name];upgradeNeeded&&dbArgs.push(dbInfo.version);var openreq=idb.open.apply(idb,dbArgs);upgradeNeeded&&(openreq.onupgradeneeded=function(e){var db=openreq.result;try{db.createObjectStore(dbInfo.storeName),e.oldVersion<=1&&db.createObjectStore(DETECT_BLOB_SUPPORT_STORE)}catch(ex){if(ex.name===`ConstraintError`)console.warn(`The database "`+dbInfo.name+`" has been upgraded from version `+e.oldVersion+` to version `+e.newVersion+`, but the storage "`+dbInfo.storeName+`" already exists.`);else throw ex}}),openreq.onerror=function(e){e.preventDefault(),reject(openreq.error)},openreq.onsuccess=function(){var db=openreq.result;db.onversionchange=function(e){e.target.close()},resolve(db),_advanceReadiness(dbInfo)}})}function _getOriginalConnection(dbInfo){return _getConnection(dbInfo,!1)}function _getUpgradedConnection(dbInfo){return _getConnection(dbInfo,!0)}function _isUpgradeNeeded(dbInfo,defaultVersion){if(!dbInfo.db)return!0;var isNewStore=!dbInfo.db.objectStoreNames.contains(dbInfo.storeName),isDowngrade=dbInfo.version<dbInfo.db.version,isUpgrade=dbInfo.version>dbInfo.db.version;if(isDowngrade&&(dbInfo.version!==defaultVersion&&console.warn(`The database "`+dbInfo.name+`" can't be downgraded from version `+dbInfo.db.version+` to version `+dbInfo.version+`.`),dbInfo.version=dbInfo.db.version),isUpgrade||isNewStore){if(isNewStore){var incVersion=dbInfo.db.version+1;incVersion>dbInfo.version&&(dbInfo.version=incVersion)}return!0}return!1}function _encodeBlob(blob){return new Promise$1(function(resolve,reject){var reader=new FileReader;reader.onerror=reject,reader.onloadend=function(e){resolve({__local_forage_encoded_blob:!0,data:btoa(e.target.result||``),type:blob.type})},reader.readAsBinaryString(blob)})}function _decodeBlob(encodedBlob){return createBlob([_binStringToArrayBuffer(atob(encodedBlob.data))],{type:encodedBlob.type})}function _isEncodedBlob(value){return value&&value.__local_forage_encoded_blob}function _fullyReady(callback){var self$1=this,promise=self$1._initReady().then(function(){var dbContext=dbContexts[self$1._dbInfo.name];if(dbContext&&dbContext.dbReady)return dbContext.dbReady});return executeTwoCallbacks(promise,callback,callback),promise}function _tryReconnect(dbInfo){_deferReadiness(dbInfo);for(var dbContext=dbContexts[dbInfo.name],forages=dbContext.forages,i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db&&(forage._dbInfo.db.close(),forage._dbInfo.db=null)}return dbInfo.db=null,_getOriginalConnection(dbInfo).then(function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo)?_getUpgradedConnection(dbInfo):db}).then(function(db){dbInfo.db=dbContext.db=db;for(var i$1=0;i$1<forages.length;i$1++)forages[i$1]._dbInfo.db=db}).catch(function(err){throw _rejectReadiness(dbInfo,err),err})}function createTransaction(dbInfo,mode,callback,retries){retries===void 0&&(retries=1);try{callback(null,dbInfo.db.transaction(dbInfo.storeName,mode))}catch(err){if(retries>0&&(!dbInfo.db||err.name===`InvalidStateError`||err.name===`NotFoundError`))return Promise$1.resolve().then(function(){if(!dbInfo.db||err.name===`NotFoundError`&&!dbInfo.db.objectStoreNames.contains(dbInfo.storeName)&&dbInfo.version<=dbInfo.db.version)return dbInfo.db&&(dbInfo.version=dbInfo.db.version+1),_getUpgradedConnection(dbInfo)}).then(function(){return _tryReconnect(dbInfo).then(function(){createTransaction(dbInfo,mode,callback,retries-1)})}).catch(callback);callback(err)}}function createDbContext(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function _initStorage(options){var self$1=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]=options[i];var dbContext=dbContexts[dbInfo.name];dbContext||(dbContext=createDbContext(),dbContexts[dbInfo.name]=dbContext),dbContext.forages.push(self$1),self$1._initReady||(self$1._initReady=self$1.ready,self$1.ready=_fullyReady);var initPromises=[];function ignoreErrors(){return Promise$1.resolve()}for(var j=0;j<dbContext.forages.length;j++){var forage=dbContext.forages[j];forage!==self$1&&initPromises.push(forage._initReady().catch(ignoreErrors))}var forages=dbContext.forages.slice(0);return Promise$1.all(initPromises).then(function(){return dbInfo.db=dbContext.db,_getOriginalConnection(dbInfo)}).then(function(db){return dbInfo.db=db,_isUpgradeNeeded(dbInfo,self$1._defaultConfig.version)?_getUpgradedConnection(dbInfo):db}).then(function(db){dbInfo.db=dbContext.db=db,self$1._dbInfo=dbInfo;for(var k=0;k<forages.length;k++){var forage$1=forages[k];forage$1!==self$1&&(forage$1._dbInfo.db=dbInfo.db,forage$1._dbInfo.version=dbInfo.version)}})}function getItem(key$3,callback){var self$1=this;key$3=normalizeKey(key$3);var promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){createTransaction(self$1._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self$1._dbInfo.storeName).get(key$3);req.onsuccess=function(){var value=req.result;value===void 0&&(value=null),_isEncodedBlob(value)&&(value=_decodeBlob(value)),resolve(value)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}function iterate(iterator,callback){var self$1=this,promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){createTransaction(self$1._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self$1._dbInfo.storeName).openCursor(),iterationNumber=1;req.onsuccess=function(){var cursor=req.result;if(cursor){var value=cursor.value;_isEncodedBlob(value)&&(value=_decodeBlob(value));var result=iterator(value,cursor.key,iterationNumber++);result===void 0?cursor.continue():resolve(result)}else resolve()},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}function setItem(key$3,value,callback){var self$1=this;key$3=normalizeKey(key$3);var promise=new Promise$1(function(resolve,reject){var dbInfo;self$1.ready().then(function(){return dbInfo=self$1._dbInfo,toString.call(value)===`[object Blob]`?_checkBlobSupport(dbInfo.db).then(function(blobSupport){return blobSupport?value:_encodeBlob(value)}):value}).then(function(value$1){createTransaction(self$1._dbInfo,READ_WRITE,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self$1._dbInfo.storeName);value$1===null&&(value$1=void 0);var req=store.put(value$1,key$3);transaction.oncomplete=function(){value$1===void 0&&(value$1=null),resolve(value$1)},transaction.onabort=transaction.onerror=function(){reject(req.error?req.error:req.transaction.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}function removeItem(key$3,callback){var self$1=this;key$3=normalizeKey(key$3);var promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){createTransaction(self$1._dbInfo,READ_WRITE,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self$1._dbInfo.storeName).delete(key$3);transaction.oncomplete=function(){resolve()},transaction.onerror=function(){reject(req.error)},transaction.onabort=function(){reject(req.error?req.error:req.transaction.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}function clear(callback){var self$1=this,promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){createTransaction(self$1._dbInfo,READ_WRITE,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self$1._dbInfo.storeName).clear();transaction.oncomplete=function(){resolve()},transaction.onabort=transaction.onerror=function(){reject(req.error?req.error:req.transaction.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}function length(callback){var self$1=this,promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){createTransaction(self$1._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self$1._dbInfo.storeName).count();req.onsuccess=function(){resolve(req.result)},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}function key(n,callback){var self$1=this,promise=new Promise$1(function(resolve,reject){if(n<0){resolve(null);return}self$1.ready().then(function(){createTransaction(self$1._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var store=transaction.objectStore(self$1._dbInfo.storeName),advanced=!1,req=store.openKeyCursor();req.onsuccess=function(){var cursor=req.result;if(!cursor){resolve(null);return}n===0||advanced?resolve(cursor.key):(advanced=!0,cursor.advance(n))},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}function keys(callback){var self$1=this,promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){createTransaction(self$1._dbInfo,READ_ONLY,function(err,transaction){if(err)return reject(err);try{var req=transaction.objectStore(self$1._dbInfo.storeName).openKeyCursor(),keys$3=[];req.onsuccess=function(){var cursor=req.result;if(!cursor){resolve(keys$3);return}keys$3.push(cursor.key),cursor.continue()},req.onerror=function(){reject(req.error)}}catch(e){reject(e)}})}).catch(reject)});return executeCallback(promise,callback),promise}function dropInstance(options,callback){callback=getCallback.apply(this,arguments);var currentConfig=this.config();options=typeof options!=`function`&&options||{},options.name||(options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName);var self$1=this,promise;if(!options.name)promise=Promise$1.reject(`Invalid arguments`);else{var dbPromise=options.name===currentConfig.name&&self$1._dbInfo.db?Promise$1.resolve(self$1._dbInfo.db):_getOriginalConnection(options).then(function(db){var dbContext=dbContexts[options.name],forages=dbContext.forages;dbContext.db=db;for(var i=0;i<forages.length;i++)forages[i]._dbInfo.db=db;return db});promise=options.storeName?dbPromise.then(function(db){if(db.objectStoreNames.contains(options.storeName)){var newVersion=db.version+1;_deferReadiness(options);var dbContext=dbContexts[options.name],forages=dbContext.forages;db.close();for(var i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db=null,forage._dbInfo.version=newVersion}return new Promise$1(function(resolve,reject){var req=idb.open(options.name,newVersion);req.onerror=function(err){req.result.close(),reject(err)},req.onupgradeneeded=function(){req.result.deleteObjectStore(options.storeName)},req.onsuccess=function(){var db$1=req.result;db$1.close(),resolve(db$1)}}).then(function(db$1){dbContext.db=db$1;for(var j=0;j<forages.length;j++){var _forage2=forages[j];_forage2._dbInfo.db=db$1,_advanceReadiness(_forage2._dbInfo)}}).catch(function(err){throw(_rejectReadiness(options,err)||Promise$1.resolve()).catch(function(){}),err})}}):dbPromise.then(function(db){_deferReadiness(options);var dbContext=dbContexts[options.name],forages=dbContext.forages;db.close();for(var i=0;i<forages.length;i++){var forage=forages[i];forage._dbInfo.db=null}return new Promise$1(function(resolve,reject){var req=idb.deleteDatabase(options.name);req.onerror=function(){var db$1=req.result;db$1&&db$1.close(),reject(req.error)},req.onblocked=function(){console.warn(`dropInstance blocked for database "`+options.name+`" until all open connections are closed`)},req.onsuccess=function(){var db$1=req.result;db$1&&db$1.close(),resolve(db$1)}}).then(function(db$1){dbContext.db=db$1;for(var i$1=0;i$1<forages.length;i$1++){var _forage=forages[i$1];_advanceReadiness(_forage._dbInfo)}}).catch(function(err){throw(_rejectReadiness(options,err)||Promise$1.resolve()).catch(function(){}),err})})}return executeCallback(promise,callback),promise}var asyncStorage={_driver:`asyncStorage`,_initStorage,_support:isIndexedDBValid(),iterate,getItem,setItem,removeItem,clear,length,key,keys,dropInstance};function isWebSQLValid(){return typeof openDatabase==`function`}var BASE_CHARS=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/`,BLOB_TYPE_PREFIX=`~~local_forage_type~`,BLOB_TYPE_PREFIX_REGEX=/^~~local_forage_type~([^~]+)~/,SERIALIZED_MARKER=`__lfsc__:`,SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER.length,TYPE_ARRAYBUFFER=`arbf`,TYPE_BLOB=`blob`,TYPE_INT8ARRAY=`si08`,TYPE_UINT8ARRAY=`ui08`,TYPE_UINT8CLAMPEDARRAY=`uic8`,TYPE_INT16ARRAY=`si16`,TYPE_INT32ARRAY=`si32`,TYPE_UINT16ARRAY=`ur16`,TYPE_UINT32ARRAY=`ui32`,TYPE_FLOAT32ARRAY=`fl32`,TYPE_FLOAT64ARRAY=`fl64`,TYPE_SERIALIZED_MARKER_LENGTH=SERIALIZED_MARKER_LENGTH+TYPE_ARRAYBUFFER.length,toString$1=Object.prototype.toString;function stringToBuffer(serializedString){var bufferLength=serializedString.length*.75,len=serializedString.length,i,p=0,encoded1,encoded2,encoded3,encoded4;serializedString[serializedString.length-1]===`=`&&(bufferLength--,serializedString[serializedString.length-2]===`=`&&bufferLength--);var buffer=new ArrayBuffer(bufferLength),bytes=new Uint8Array(buffer);for(i=0;i<len;i+=4)encoded1=BASE_CHARS.indexOf(serializedString[i]),encoded2=BASE_CHARS.indexOf(serializedString[i+1]),encoded3=BASE_CHARS.indexOf(serializedString[i+2]),encoded4=BASE_CHARS.indexOf(serializedString[i+3]),bytes[p++]=encoded1<<2|encoded2>>4,bytes[p++]=(encoded2&15)<<4|encoded3>>2,bytes[p++]=(encoded3&3)<<6|encoded4&63;return buffer}function bufferToString(buffer){var bytes=new Uint8Array(buffer),base64String=``,i;for(i=0;i<bytes.length;i+=3)base64String+=BASE_CHARS[bytes[i]>>2],base64String+=BASE_CHARS[(bytes[i]&3)<<4|bytes[i+1]>>4],base64String+=BASE_CHARS[(bytes[i+1]&15)<<2|bytes[i+2]>>6],base64String+=BASE_CHARS[bytes[i+2]&63];return bytes.length%3==2?base64String=base64String.substring(0,base64String.length-1)+`=`:bytes.length%3==1&&(base64String=base64String.substring(0,base64String.length-2)+`==`),base64String}function serialize(value,callback){var valueType=``;if(value&&(valueType=toString$1.call(value)),value&&(valueType===`[object ArrayBuffer]`||value.buffer&&toString$1.call(value.buffer)===`[object ArrayBuffer]`)){var buffer,marker=SERIALIZED_MARKER;value instanceof ArrayBuffer?(buffer=value,marker+=TYPE_ARRAYBUFFER):(buffer=value.buffer,valueType===`[object Int8Array]`?marker+=TYPE_INT8ARRAY:valueType===`[object Uint8Array]`?marker+=TYPE_UINT8ARRAY:valueType===`[object Uint8ClampedArray]`?marker+=TYPE_UINT8CLAMPEDARRAY:valueType===`[object Int16Array]`?marker+=TYPE_INT16ARRAY:valueType===`[object Uint16Array]`?marker+=TYPE_UINT16ARRAY:valueType===`[object Int32Array]`?marker+=TYPE_INT32ARRAY:valueType===`[object Uint32Array]`?marker+=TYPE_UINT32ARRAY:valueType===`[object Float32Array]`?marker+=TYPE_FLOAT32ARRAY:valueType===`[object Float64Array]`?marker+=TYPE_FLOAT64ARRAY:callback(Error(`Failed to get type for BinaryArray`))),callback(marker+bufferToString(buffer))}else if(valueType===`[object Blob]`){var fileReader=new FileReader;fileReader.onload=function(){var str=BLOB_TYPE_PREFIX+value.type+`~`+bufferToString(this.result);callback(SERIALIZED_MARKER+TYPE_BLOB+str)},fileReader.readAsArrayBuffer(value)}else try{callback(JSON.stringify(value))}catch(e){console.error(`Couldn't convert value into a JSON string: `,value),callback(null,e)}}function deserialize(value){if(value.substring(0,SERIALIZED_MARKER_LENGTH)!==SERIALIZED_MARKER)return JSON.parse(value);var serializedString=value.substring(TYPE_SERIALIZED_MARKER_LENGTH),type=value.substring(SERIALIZED_MARKER_LENGTH,TYPE_SERIALIZED_MARKER_LENGTH),blobType;if(type===TYPE_BLOB&&BLOB_TYPE_PREFIX_REGEX.test(serializedString)){var matcher=serializedString.match(BLOB_TYPE_PREFIX_REGEX);blobType=matcher[1],serializedString=serializedString.substring(matcher[0].length)}var buffer=stringToBuffer(serializedString);switch(type){case TYPE_ARRAYBUFFER:return buffer;case TYPE_BLOB:return createBlob([buffer],{type:blobType});case TYPE_INT8ARRAY:return new Int8Array(buffer);case TYPE_UINT8ARRAY:return new Uint8Array(buffer);case TYPE_UINT8CLAMPEDARRAY:return new Uint8ClampedArray(buffer);case TYPE_INT16ARRAY:return new Int16Array(buffer);case TYPE_UINT16ARRAY:return new Uint16Array(buffer);case TYPE_INT32ARRAY:return new Int32Array(buffer);case TYPE_UINT32ARRAY:return new Uint32Array(buffer);case TYPE_FLOAT32ARRAY:return new Float32Array(buffer);case TYPE_FLOAT64ARRAY:return new Float64Array(buffer);default:throw Error(`Unkown type: `+type)}}var localforageSerializer={serialize,deserialize,stringToBuffer,bufferToString};function createDbTable(t,dbInfo,callback,errorCallback){t.executeSql(`CREATE TABLE IF NOT EXISTS `+dbInfo.storeName+` (id INTEGER PRIMARY KEY, key unique, value)`,[],callback,errorCallback)}function _initStorage$1(options){var self$1=this,dbInfo={db:null};if(options)for(var i in options)dbInfo[i]=typeof options[i]==`string`?options[i]:options[i].toString();var dbInfoPromise=new Promise$1(function(resolve,reject){try{dbInfo.db=openDatabase(dbInfo.name,String(dbInfo.version),dbInfo.description,dbInfo.size)}catch(e){return reject(e)}dbInfo.db.transaction(function(t){createDbTable(t,dbInfo,function(){self$1._dbInfo=dbInfo,resolve()},function(t$1,error){reject(error)})},reject)});return dbInfo.serializer=localforageSerializer,dbInfoPromise}function tryExecuteSql(t,dbInfo,sqlStatement,args,callback,errorCallback){t.executeSql(sqlStatement,args,callback,function(t$1,error){error.code===error.SYNTAX_ERR?t$1.executeSql(`SELECT name FROM sqlite_master WHERE type='table' AND name = ?`,[dbInfo.storeName],function(t$2,results){results.rows.length?errorCallback(t$2,error):createDbTable(t$2,dbInfo,function(){t$2.executeSql(sqlStatement,args,callback,errorCallback)},errorCallback)},errorCallback):errorCallback(t$1,error)},errorCallback)}function getItem$1(key$3,callback){var self$1=this;key$3=normalizeKey(key$3);var promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){var dbInfo=self$1._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,`SELECT * FROM `+dbInfo.storeName+` WHERE key = ? LIMIT 1`,[key$3],function(t$1,results){var result=results.rows.length?results.rows.item(0).value:null;result&&=dbInfo.serializer.deserialize(result),resolve(result)},function(t$1,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}function iterate$1(iterator,callback){var self$1=this,promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){var dbInfo=self$1._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,`SELECT * FROM `+dbInfo.storeName,[],function(t$1,results){for(var rows=results.rows,length$3=rows.length,i=0;i<length$3;i++){var item=rows.item(i),result=item.value;if(result&&=dbInfo.serializer.deserialize(result),result=iterator(result,item.key,i+1),result!==void 0){resolve(result);return}}resolve()},function(t$1,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}function _setItem(key$3,value,callback,retriesLeft){var self$1=this;key$3=normalizeKey(key$3);var promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){value===void 0&&(value=null);var originalValue=value,dbInfo=self$1._dbInfo;dbInfo.serializer.serialize(value,function(value$1,error){error?reject(error):dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,`INSERT OR REPLACE INTO `+dbInfo.storeName+` (key, value) VALUES (?, ?)`,[key$3,value$1],function(){resolve(originalValue)},function(t$1,error$1){reject(error$1)})},function(sqlError){if(sqlError.code===sqlError.QUOTA_ERR){if(retriesLeft>0){resolve(_setItem.apply(self$1,[key$3,originalValue,callback,retriesLeft-1]));return}reject(sqlError)}})})}).catch(reject)});return executeCallback(promise,callback),promise}function setItem$1(key$3,value,callback){return _setItem.apply(this,[key$3,value,callback,1])}function removeItem$1(key$3,callback){var self$1=this;key$3=normalizeKey(key$3);var promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){var dbInfo=self$1._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,`DELETE FROM `+dbInfo.storeName+` WHERE key = ?`,[key$3],function(){resolve()},function(t$1,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}function clear$1(callback){var self$1=this,promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){var dbInfo=self$1._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,`DELETE FROM `+dbInfo.storeName,[],function(){resolve()},function(t$1,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}function length$1(callback){var self$1=this,promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){var dbInfo=self$1._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,`SELECT COUNT(key) as c FROM `+dbInfo.storeName,[],function(t$1,results){var result=results.rows.item(0).c;resolve(result)},function(t$1,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}function key$1(n,callback){var self$1=this,promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){var dbInfo=self$1._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,`SELECT key FROM `+dbInfo.storeName+` WHERE id = ? LIMIT 1`,[n+1],function(t$1,results){resolve(results.rows.length?results.rows.item(0).key:null)},function(t$1,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}function keys$1(callback){var self$1=this,promise=new Promise$1(function(resolve,reject){self$1.ready().then(function(){var dbInfo=self$1._dbInfo;dbInfo.db.transaction(function(t){tryExecuteSql(t,dbInfo,`SELECT key FROM `+dbInfo.storeName,[],function(t$1,results){for(var keys$3=[],i=0;i<results.rows.length;i++)keys$3.push(results.rows.item(i).key);resolve(keys$3)},function(t$1,error){reject(error)})})}).catch(reject)});return executeCallback(promise,callback),promise}function getAllStoreNames(db){return new Promise$1(function(resolve,reject){db.transaction(function(t){t.executeSql(`SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'`,[],function(t$1,results){for(var storeNames=[],i=0;i<results.rows.length;i++)storeNames.push(results.rows.item(i).name);resolve({db,storeNames})},function(t$1,error){reject(error)})},function(sqlError){reject(sqlError)})})}function dropInstance$1(options,callback){callback=getCallback.apply(this,arguments);var currentConfig=this.config();options=typeof options!=`function`&&options||{},options.name||(options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName);var self$1=this,promise=options.name?new Promise$1(function(resolve){var db=options.name===currentConfig.name?self$1._dbInfo.db:openDatabase(options.name,``,``,0);options.storeName?resolve({db,storeNames:[options.storeName]}):resolve(getAllStoreNames(db))}).then(function(operationInfo){return new Promise$1(function(resolve,reject){operationInfo.db.transaction(function(t){function dropTable(storeName){return new Promise$1(function(resolve$1,reject$1){t.executeSql(`DROP TABLE IF EXISTS `+storeName,[],function(){resolve$1()},function(t$1,error){reject$1(error)})})}for(var operations=[],i=0,len=operationInfo.storeNames.length;i<len;i++)operations.push(dropTable(operationInfo.storeNames[i]));Promise$1.all(operations).then(function(){resolve()}).catch(function(e){reject(e)})},function(sqlError){reject(sqlError)})})}):Promise$1.reject(`Invalid arguments`);return executeCallback(promise,callback),promise}var webSQLStorage={_driver:`webSQLStorage`,_initStorage:_initStorage$1,_support:isWebSQLValid(),iterate:iterate$1,getItem:getItem$1,setItem:setItem$1,removeItem:removeItem$1,clear:clear$1,length:length$1,key:key$1,keys:keys$1,dropInstance:dropInstance$1};function isLocalStorageValid(){try{return typeof localStorage<`u`&&`setItem`in localStorage&&!!localStorage.setItem}catch{return!1}}function _getKeyPrefix(options,defaultConfig){var keyPrefix=options.name+`/`;return options.storeName!==defaultConfig.storeName&&(keyPrefix+=options.storeName+`/`),keyPrefix}function checkIfLocalStorageThrows(){var localStorageTestKey=`_localforage_support_test`;try{return localStorage.setItem(localStorageTestKey,!0),localStorage.removeItem(localStorageTestKey),!1}catch{return!0}}function _isLocalStorageUsable(){return!checkIfLocalStorageThrows()||localStorage.length>0}function _initStorage$2(options){var self$1=this,dbInfo={};if(options)for(var i in options)dbInfo[i]=options[i];return dbInfo.keyPrefix=_getKeyPrefix(options,self$1._defaultConfig),_isLocalStorageUsable()?(self$1._dbInfo=dbInfo,dbInfo.serializer=localforageSerializer,Promise$1.resolve()):Promise$1.reject()}function clear$2(callback){var self$1=this,promise=self$1.ready().then(function(){for(var keyPrefix=self$1._dbInfo.keyPrefix,i=localStorage.length-1;i>=0;i--){var key$3=localStorage.key(i);key$3.indexOf(keyPrefix)===0&&localStorage.removeItem(key$3)}});return executeCallback(promise,callback),promise}function getItem$2(key$3,callback){var self$1=this;key$3=normalizeKey(key$3);var promise=self$1.ready().then(function(){var dbInfo=self$1._dbInfo,result=localStorage.getItem(dbInfo.keyPrefix+key$3);return result&&=dbInfo.serializer.deserialize(result),result});return executeCallback(promise,callback),promise}function iterate$2(iterator,callback){var self$1=this,promise=self$1.ready().then(function(){for(var dbInfo=self$1._dbInfo,keyPrefix=dbInfo.keyPrefix,keyPrefixLength=keyPrefix.length,length$3=localStorage.length,iterationNumber=1,i=0;i<length$3;i++){var key$3=localStorage.key(i);if(key$3.indexOf(keyPrefix)===0){var value=localStorage.getItem(key$3);if(value&&=dbInfo.serializer.deserialize(value),value=iterator(value,key$3.substring(keyPrefixLength),iterationNumber++),value!==void 0)return value}}});return executeCallback(promise,callback),promise}function key$2(n,callback){var self$1=this,promise=self$1.ready().then(function(){var dbInfo=self$1._dbInfo,result;try{result=localStorage.key(n)}catch{result=null}return result&&=result.substring(dbInfo.keyPrefix.length),result});return executeCallback(promise,callback),promise}function keys$2(callback){var self$1=this,promise=self$1.ready().then(function(){for(var dbInfo=self$1._dbInfo,length$3=localStorage.length,keys$3=[],i=0;i<length$3;i++){var itemKey=localStorage.key(i);itemKey.indexOf(dbInfo.keyPrefix)===0&&keys$3.push(itemKey.substring(dbInfo.keyPrefix.length))}return keys$3});return executeCallback(promise,callback),promise}function length$2(callback){var promise=this.keys().then(function(keys$3){return keys$3.length});return executeCallback(promise,callback),promise}function removeItem$2(key$3,callback){var self$1=this;key$3=normalizeKey(key$3);var promise=self$1.ready().then(function(){var dbInfo=self$1._dbInfo;localStorage.removeItem(dbInfo.keyPrefix+key$3)});return executeCallback(promise,callback),promise}function setItem$2(key$3,value,callback){var self$1=this;key$3=normalizeKey(key$3);var promise=self$1.ready().then(function(){value===void 0&&(value=null);var originalValue=value;return new Promise$1(function(resolve,reject){var dbInfo=self$1._dbInfo;dbInfo.serializer.serialize(value,function(value$1,error){if(error)reject(error);else try{localStorage.setItem(dbInfo.keyPrefix+key$3,value$1),resolve(originalValue)}catch(e){(e.name===`QuotaExceededError`||e.name===`NS_ERROR_DOM_QUOTA_REACHED`)&&reject(e),reject(e)}})})});return executeCallback(promise,callback),promise}function dropInstance$2(options,callback){if(callback=getCallback.apply(this,arguments),options=typeof options!=`function`&&options||{},!options.name){var currentConfig=this.config();options.name=options.name||currentConfig.name,options.storeName=options.storeName||currentConfig.storeName}var self$1=this,promise=options.name?new Promise$1(function(resolve){options.storeName?resolve(_getKeyPrefix(options,self$1._defaultConfig)):resolve(options.name+`/`)}).then(function(keyPrefix){for(var i=localStorage.length-1;i>=0;i--){var key$3=localStorage.key(i);key$3.indexOf(keyPrefix)===0&&localStorage.removeItem(key$3)}}):Promise$1.reject(`Invalid arguments`);return executeCallback(promise,callback),promise}var localStorageWrapper={_driver:`localStorageWrapper`,_initStorage:_initStorage$2,_support:isLocalStorageValid(),iterate:iterate$2,getItem:getItem$2,setItem:setItem$2,removeItem:removeItem$2,clear:clear$2,length:length$2,key:key$2,keys:keys$2,dropInstance:dropInstance$2},sameValue=function(x,y){return x===y||typeof x==`number`&&typeof y==`number`&&isNaN(x)&&isNaN(y)},includes=function(array,searchElement){for(var len=array.length,i=0;i<len;){if(sameValue(array[i],searchElement))return!0;i++}return!1},isArray=Array.isArray||function(arg){return Object.prototype.toString.call(arg)===`[object Array]`},DefinedDrivers={},DriverSupport={},DefaultDrivers={INDEXEDDB:asyncStorage,WEBSQL:webSQLStorage,LOCALSTORAGE:localStorageWrapper},DefaultDriverOrder=[DefaultDrivers.INDEXEDDB._driver,DefaultDrivers.WEBSQL._driver,DefaultDrivers.LOCALSTORAGE._driver],OptionalDriverMethods=[`dropInstance`],LibraryMethods=[`clear`,`getItem`,`iterate`,`key`,`keys`,`length`,`removeItem`,`setItem`].concat(OptionalDriverMethods),DefaultConfig={description:``,driver:DefaultDriverOrder.slice(),name:`localforage`,size:4980736,storeName:`keyvaluepairs`,version:1};function callWhenReady(localForageInstance,libraryMethod){localForageInstance[libraryMethod]=function(){var _args=arguments;return localForageInstance.ready().then(function(){return localForageInstance[libraryMethod].apply(localForageInstance,_args)})}}function extend(){for(var i=1;i<arguments.length;i++){var arg=arguments[i];if(arg)for(var _key in arg)arg.hasOwnProperty(_key)&&(isArray(arg[_key])?arguments[0][_key]=arg[_key].slice():arguments[0][_key]=arg[_key])}return arguments[0]}module$1.exports=new(function(){function LocalForage(options){for(var driverTypeKey in _classCallCheck(this,LocalForage),DefaultDrivers)if(DefaultDrivers.hasOwnProperty(driverTypeKey)){var driver=DefaultDrivers[driverTypeKey],driverName=driver._driver;this[driverTypeKey]=driverName,DefinedDrivers[driverName]||this.defineDriver(driver)}this._defaultConfig=extend({},DefaultConfig),this._config=extend({},this._defaultConfig,options),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return LocalForage.prototype.config=function(options){if((options===void 0?`undefined`:_typeof(options))===`object`){if(this._ready)return Error(`Can't call config() after localforage has been used.`);for(var i in options){if(i===`storeName`&&(options[i]=options[i].replace(/\W/g,`_`)),i===`version`&&typeof options[i]!=`number`)return Error(`Database version must be a number.`);this._config[i]=options[i]}return`driver`in options&&options.driver?this.setDriver(this._config.driver):!0}else if(typeof options==`string`)return this._config[options];else return this._config},LocalForage.prototype.defineDriver=function(driverObject,callback,errorCallback){var promise=new Promise$1(function(resolve,reject){try{var driverName=driverObject._driver,complianceError=Error(`Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver`);if(!driverObject._driver){reject(complianceError);return}for(var driverMethods=LibraryMethods.concat(`_initStorage`),i=0,len=driverMethods.length;i<len;i++){var driverMethodName=driverMethods[i];if((!includes(OptionalDriverMethods,driverMethodName)||driverObject[driverMethodName])&&typeof driverObject[driverMethodName]!=`function`){reject(complianceError);return}}(function(){for(var methodNotImplementedFactory=function(methodName){return function(){var error=Error(`Method `+methodName+` is not implemented by the current driver`),promise$1=Promise$1.reject(error);return executeCallback(promise$1,arguments[arguments.length-1]),promise$1}},_i=0,_len=OptionalDriverMethods.length;_i<_len;_i++){var optionalDriverMethod=OptionalDriverMethods[_i];driverObject[optionalDriverMethod]||(driverObject[optionalDriverMethod]=methodNotImplementedFactory(optionalDriverMethod))}})();var setDriverSupport=function(support){DefinedDrivers[driverName]&&console.info(`Redefining LocalForage driver: `+driverName),DefinedDrivers[driverName]=driverObject,DriverSupport[driverName]=support,resolve()};`_support`in driverObject?driverObject._support&&typeof driverObject._support==`function`?driverObject._support().then(setDriverSupport,reject):setDriverSupport(!!driverObject._support):setDriverSupport(!0)}catch(e){reject(e)}});return executeTwoCallbacks(promise,callback,errorCallback),promise},LocalForage.prototype.driver=function(){return this._driver||null},LocalForage.prototype.getDriver=function(driverName,callback,errorCallback){var getDriverPromise=DefinedDrivers[driverName]?Promise$1.resolve(DefinedDrivers[driverName]):Promise$1.reject(Error(`Driver not found.`));return executeTwoCallbacks(getDriverPromise,callback,errorCallback),getDriverPromise},LocalForage.prototype.getSerializer=function(callback){var serializerPromise=Promise$1.resolve(localforageSerializer);return executeTwoCallbacks(serializerPromise,callback),serializerPromise},LocalForage.prototype.ready=function(callback){var self$1=this,promise=self$1._driverSet.then(function(){return self$1._ready===null&&(self$1._ready=self$1._initDriver()),self$1._ready});return executeTwoCallbacks(promise,callback,callback),promise},LocalForage.prototype.setDriver=function(drivers,callback,errorCallback){var self$1=this;isArray(drivers)||(drivers=[drivers]);var supportedDrivers=this._getSupportedDrivers(drivers);function setDriverToConfig(){self$1._config.driver=self$1.driver()}function extendSelfWithDriver(driver){return self$1._extend(driver),setDriverToConfig(),self$1._ready=self$1._initStorage(self$1._config),self$1._ready}function initDriver(supportedDrivers$1){return function(){var currentDriverIndex=0;function driverPromiseLoop(){for(;currentDriverIndex<supportedDrivers$1.length;){var driverName=supportedDrivers$1[currentDriverIndex];return currentDriverIndex++,self$1._dbInfo=null,self$1._ready=null,self$1.getDriver(driverName).then(extendSelfWithDriver).catch(driverPromiseLoop)}setDriverToConfig();var error=Error(`No available storage method found.`);return self$1._driverSet=Promise$1.reject(error),self$1._driverSet}return driverPromiseLoop()}}return this._driverSet=(this._driverSet===null?Promise$1.resolve():this._driverSet.catch(function(){return Promise$1.resolve()})).then(function(){var driverName=supportedDrivers[0];return self$1._dbInfo=null,self$1._ready=null,self$1.getDriver(driverName).then(function(driver){self$1._driver=driver._driver,setDriverToConfig(),self$1._wrapLibraryMethodsWithReady(),self$1._initDriver=initDriver(supportedDrivers)})}).catch(function(){setDriverToConfig();var error=Error(`No available storage method found.`);return self$1._driverSet=Promise$1.reject(error),self$1._driverSet}),executeTwoCallbacks(this._driverSet,callback,errorCallback),this._driverSet},LocalForage.prototype.supports=function(driverName){return!!DriverSupport[driverName]},LocalForage.prototype._extend=function(libraryMethodsAndProperties){extend(this,libraryMethodsAndProperties)},LocalForage.prototype._getSupportedDrivers=function(drivers){for(var supportedDrivers=[],i=0,len=drivers.length;i<len;i++){var driverName=drivers[i];this.supports(driverName)&&supportedDrivers.push(driverName)}return supportedDrivers},LocalForage.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,len=LibraryMethods.length;i<len;i++)callWhenReady(this,LibraryMethods[i])},LocalForage.prototype.createInstance=function(options){return new LocalForage(options)},LocalForage}())},{3:3}]},{},[4])(4)})}));export{require_store_legacy as n,require_localforage as t};